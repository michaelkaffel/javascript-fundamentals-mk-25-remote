<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching Game</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            text-align: center;
            border: solid red 1px;
        }

        img {
            position: absolute;
        }

        div {
            position: absolute;
            width: 500px;
            height: 500px;
            margin: 0 auto;
        }

        #rightSide {
            left: 500px;
            border-left: 1px solid;
        }

        button {
            margin-bottom: 5rem;
        }

        p {
            margin-bottom: 2rem;
        }
    </style>

</head>

<body>
    <h1>Matching Game</h1>
    <p>Click on the extra smiling face on the left side of the screen. If you click on anything else the game will. At
        game over click the "reset game" button to reset the game.</p>
    <p>Current Level: <span id="counter">1</span></p>
    <button type="button" id="resetBtn">RESET GAME</button>


    <div id="leftSide"></div>
    <div id="rightSide"></div>




    <script>
        window.addEventListener('load', generateFaces);

        let numberOfFaces = 5;
        const theLeftSide = document.querySelector('#leftSide');
        const theRightSide = document.querySelector('#rightSide');
        const countertOutput = document.querySelector('#counter');
        const resetButton = document.querySelector('#resetBtn');
        resetButton.addEventListener('click', resetGame)
        resetButton.hidden = true;
        let counter = 1;


        function generateFaces() {
            for (let i = 0; i < numberOfFaces; i++) {
                let face = document.createElement('img');
                face.src = 'images/smile.png';
                let randomTop = Math.floor(Math.random() * 400) + 1;
                let randomLeft = Math.floor(Math.random() * 400) + 1;
                face.style.top = randomTop + 'px';
                face.style.left = randomLeft + 'px';
                theLeftSide.appendChild(face);

            }
            const leftSideImages = theLeftSide.cloneNode(true);
            leftSideImages.removeChild(leftSideImages.lastChild);
            theRightSide.appendChild(leftSideImages);

            theLeftSide.lastChild.addEventListener('click', nextLevel)
            document.body.addEventListener('click', gameOver)
        }

        function nextLevel(event) {
            event.stopPropagation();

            while (theLeftSide.firstChild) {
                theLeftSide.removeChild(theLeftSide.firstChild)
            }
            while (theRightSide.firstChild) {
                theRightSide.removeChild(theRightSide.firstChild)
            }
            counter++;
            countertOutput.innerHTML = counter;

            numberOfFaces += 5;
            generateFaces();
        }

        function gameOver() {
            alert(`Game Over!\n\nYou reached level ${counter}`)
            theLeftSide.lastChild.removeEventListener('click', nextLevel)
            document.body.removeEventListener('click', gameOver)
            resetButton.hidden = false;
        }

        function resetGame() {
            window.location.reload();
        }



    </script>
</body>

</html>